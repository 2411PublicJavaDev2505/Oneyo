<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="RecipeMapper">
	<resultMap type="Recipe" id="recipeResult">
		<id		property="recipeNo" 		column="RECIPE_NO"/>
		<result property="recipeSourcesNo" 	column="RECIPE_SOURCES_NO"/>
		<result property="memberId"			column="MEMBER_ID"/>
		<result property="recipeTitle" 		column="RECIPE_TITLE"/>
		<result property="recipeContent" 	column="RECIPE_CONTENT"/>
		<result property="recommendCount" 	column="RECOMMEND_COUNT"/>
		<result property="recipeDate" 		column="RECIPE_DATE"/>
		<result property="updateDate" 		column="UPDATE_DATE"/>
		<result property="delYn" 			column="DEL_YN"/>
	</resultMap>
	
	<select id="selectListAll" resultType="Recipe">
		SELECT * FROM RECIPE WHERE RECIPE_YN = 'Y' ORDER BY RECIPE_NO DESC
	</select>
	<select id="selectOneByNo" resultType="Recipe">
		SELECT * FROM RECIPE WHERE RECIPE_YN = 'Y' AND RECIPE_NO = #{recipeNo}
	</select>
	<select id="getTotalCount" resultType="_int">
		SELECT COUNT(*) FROM RECIPE WHERE RECIPE_YN = 'Y'
	</select>
	<insert id="insertRecipe">
		INSERT INTO RECIPE VALUES(SEQ_RECIPE_NO.NEXTVAL, #{recipeTitle}, #{recipeContent}, DEFAULT
		, DEFAULT, DEFAULT, DEFAULT)
	</insert>
	<update id="updateRecipe">
		UPDATE RECIPE SET RECIPE TITLE = #{recipeTitle}, RECIPE_CONTENT = #{recipeContent} 
		, RECIPE_FILENAME = #{recipeFilename}, RECIPE_FILE_RENAME = #{recipeFileRename}, RECIPE_FILEPATH = #{recipeFilepath}
		, UPDATE_DATE = DEFAULT WHERE RECIPE_NO = #{recipeNo} 
	</update>
	<delete id="deleteRecipe">
		DELETE RECIPE_TBL SET RECIPE_YN = 'N' WHERE RECIPE_NO = #{recipeNo}
	</delete>
</mapper>
